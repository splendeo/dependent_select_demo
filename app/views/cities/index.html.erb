<% title "Cities" %>

<% form_tag cities_path, :method=>:get do %>

  <p>
  <%= label_tag :country_id, 'Country' %><br />
  <%= collection_select :query, :country_id, @countries, :id, :name, :include_blank => true %>
  </p><p>
  <%= label_tag :province_id, 'Province' %><br />
  <%= dependent_collection_select :query, :province_id, @provinces, :id, :name, :country_id, :include_blank => true %>
  </p>
  <div><%= submit_tag 'Show cities' %></div>
<% end %>

<table>
  <tr>
    <th>Country</th>
    <th>Province</th>
    <th>Name</th>
  </tr>
  <% for city in @cities %>
    <tr>
      <td><%=h city.country.name %></td>
      <td><%=h city.province.name %></td>
      <td><%=h city.name %></td>
      <td><%= link_to "Show", city %></td>
      <td><%= link_to "Edit", edit_city_path(city) %></td>
      <td><%= link_to "Destroy", city, :confirm => 'Are you sure?', :method => :delete %></td>
    </tr>
  <% end %>
</table>

<p><%= link_to "New City", new_city_path %></p>
